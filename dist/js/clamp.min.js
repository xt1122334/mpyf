window.$clamp=function(l,e){function n(e,t){return u.getComputedStyle||(u.getComputedStyle=function(n,e){return this.el=n,this.getPropertyValue=function(e){var t=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),t.test(e)&&(e=e.replace(t,function(e,t,n){return n.toUpperCase()})),n.currentStyle&&n.currentStyle[e]?n.currentStyle[e]:null},this}),u.getComputedStyle(e,null).getPropertyValue(t)}function t(e){e=e||l.clientHeight;var t=i(l);return Math.max(Math.floor(e/t),0)}function i(e){var t=n(e,"line-height");return"normal"==t&&(t=1.2*parseInt(n(e,"font-size"))),parseInt(t)}function a(e){return e.lastChild.children&&0<e.lastChild.children.length?a(Array.prototype.slice.call(e.children).pop()):e.lastChild&&e.lastChild.nodeValue&&""!=e.lastChild.nodeValue&&e.lastChild.nodeValue!=c.truncationChar?e.lastChild:(e.lastChild.parentNode.removeChild(e.lastChild),a(l))}function r(e,t){e.nodeValue=t+c.truncationChar}e=e||{};var o,u=window,c={clamp:e.clamp||2,useNativeClamp:void 0===e.useNativeClamp||e.useNativeClamp,splitOnChars:e.splitOnChars||[".","-","–","—"," "],animate:e.animate||!1,truncationChar:e.truncationChar||"…",truncationHTML:e.truncationHTML},s=l.style,h=l.innerHTML,p=void 0!==l.style.webkitLineClamp,d=c.clamp,C=d.indexOf&&(-1<d.indexOf("px")||-1<d.indexOf("em"));c.truncationHTML&&((o=document.createElement("span")).innerHTML=c.truncationHTML);var m,f,g,v,y=c.splitOnChars.slice(0),H=y[0];return"auto"==d?d=t():C&&(d=t(parseInt(d))),p&&c.useNativeClamp?(s.overflow="hidden",s.textOverflow="ellipsis",s.webkitBoxOrient="vertical",s.display="-webkit-box",s.webkitLineClamp=d,C&&(s.height=c.clamp+"px")):(v=d,(s=i(l)*v)<=l.clientHeight&&(g=function e(t,n){if(n){var i=t.nodeValue.replace(c.truncationChar,"");if(m||(H=0<y.length?y.shift():"",m=i.split(H)),1<m.length?(f=m.pop(),r(t,m.join(H))):m=null,o&&(t.nodeValue=t.nodeValue.replace(c.truncationChar,""),l.innerHTML=t.nodeValue+" "+o.innerHTML+c.truncationChar),m){if(l.clientHeight<=n){if(!(0<=y.length&&""!=H))return l.innerHTML;r(t,m.join(H)+H+f),m=null}}else""==H&&(r(t,""),t=a(l),y=c.splitOnChars.slice(0),H=y[0],f=m=null);if(!c.animate)return e(t,n);setTimeout(function(){e(t,n)},!0===c.animate?10:c.animate)}}(a(l),s))),{original:h,clamped:g}};